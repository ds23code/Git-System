#!/usr/bin/env python3

import os
import sys

try:
    # Attempt to create the main .mygit directory
    os.mkdir(".mygit")
    
    # Create subdirectories to hold index files, commits, and branches
    os.mkdir(".mygit/index")
    os.mkdir(".mygit/commits")
    os.mkdir(".mygit/branches")
    
    # Create a file to track commit count, starting at 0
    with open(".mygit/commit_count", "w") as f:
        f.write("0")
    
    # Create a file to track the current branch, default to 'trunk'
    with open(".mygit/current_branch", "w") as f:
        f.write("trunk")
    
    # Initialize the trunk branch as an empty file to support branch operations
    with open(".mygit/branches/trunk", "w") as f:
        f.write("")
    
    # Print success message as per spec
    print("Initialized empty mygit repository in .mygit")

except FileExistsError:
    # If .mygit already exists, print the exact error message and exit with status 1
    print("mygit-init: error: .mygit already exists", file=sys.stderr)
    exit(1)